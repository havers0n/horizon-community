# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–∏ —Ñ–æ—Ä—É–º–∞

## –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ `42846: cannot cast type uuid to integer` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –≤ RLS –ø–æ–ª–∏—Ç–∏–∫–∞—Ö. –ú—ã –∏—Å–ø—Ä–∞–≤–∏–ª–∏ —ç—Ç–æ, –Ω–æ —Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é.

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: `23503: insert or update on table "forum_categories" violates foreign key constraint` - –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ –ø–æ–ø—ã—Ç–∫–∏ —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ department_id.

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Supabase Dashboard (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://supabase.com/dashboard
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã**
   - –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ —Ñ–∞–π–ª–∞ `scripts/check_departments.sql`
   - –ó–∞–ø–∏—à–∏—Ç–µ ID —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤

3. **–û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏**
   - –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ "SQL Editor"
   - –ù–∞–∂–º–∏—Ç–µ "New query"

4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `scripts/create_forum_tables.sql`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
   - –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor
   - –ù–∞–∂–º–∏—Ç–µ "Run" –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Table Editor"
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:
     - `forum_categories`
     - `forum_topics`
     - `forum_posts`
     - `forum_reactions`
     - `forum_subscriptions`
     - `forum_views`
     - `forum_stats`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Supabase CLI

–ï—Å–ª–∏ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω Supabase CLI:

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
supabase db push

# –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å SQL —Ñ–∞–π–ª
supabase db reset --linked
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ psql (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
psql "postgresql://postgres:[password]@[host]:5432/postgres"

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Ñ–∞–π–ª
\i scripts/create_forum_tables.sql
```

## –ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è

### –¢–∞–±–ª–∏—Ü—ã
1. **forum_categories** - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ñ–æ—Ä—É–º–∞ (–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã)
2. **forum_topics** - –¢–µ–º—ã —Ñ–æ—Ä—É–º–∞
3. **forum_posts** - –°–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–µ–º–∞—Ö
4. **forum_reactions** - –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
5. **forum_subscriptions** - –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Ç–µ–º—ã
6. **forum_views** - –ü—Ä–æ—Å–º–æ—Ç—Ä—ã —Ç–µ–º
7. **forum_stats** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–æ—Ä—É–º–∞

### –ò–Ω–¥–µ–∫—Å—ã
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

### RLS –ü–æ–ª–∏—Ç–∏–∫–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–∫
- –†–∞–∑–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –≥–æ—Å—Ç–µ–π, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–æ–≤

### –¢—Ä–∏–≥–≥–µ—Ä—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤
- –ü–æ–¥—Å—á–µ—Ç —Ç–µ–º –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

### –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
- –ï—Å–ª–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã, —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏
- –ù–∞—á–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã**
   ```sql
   SELECT table_name FROM information_schema.tables 
   WHERE table_schema = 'public' AND table_name LIKE 'forum_%';
   ```

2. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã**
   ```sql
   SELECT * FROM forum_categories;
   ```

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∞**
   ```sql
   SELECT * FROM forum_stats;
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤—è–∑–∏ —Å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º–∏**
   ```sql
   SELECT 
       fc.name as category_name,
       fc.department_id,
       d.name as department_name
   FROM forum_categories fc
   LEFT JOIN departments d ON fc.department_id = d.id
   ORDER BY fc.order_index;
   ```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**
   ```bash
   npm run dev
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Ñ–æ—Ä—É–º–∞**
   - –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173/forum
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Ç–µ–º—É

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞**
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–º
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
   - –†–µ–∞–∫—Ü–∏–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏
   - –ü–æ–∏—Å–∫ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞ "relation does not exist"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SQL –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard

### –û—à–∏–±–∫–∏ RLS
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª–∏—Ç–∏–∫–∏ —Å–æ–∑–¥–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–æ–ª–∏

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 'active'

### –û—à–∏–±–∫–∞ foreign key constraint
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `departments` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –Ω–µ–π –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º, –µ—Å–ª–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ SQL –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `scripts/check_departments.sql` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
5. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ `docs/FORUM_SYSTEM.md`

---

**–§–æ—Ä—É–º –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ 