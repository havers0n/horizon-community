# üîê –£–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–µ–ø–ª–æ—è

## –û–±–∑–æ—Ä

–í–Ω–µ—Å–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ GitHub Actions workflow –¥–ª—è –∑–∞—â–∏—Ç—ã –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## üö® –ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)

### ‚ùå –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥:
1. **env.example –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** - –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥–ª–∏ –ø–æ–ø–∞—Å—Ç—å –≤ –∞—Ä—Ö–∏–≤
2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –ø—Ä–∏ —Å–±–æ—Ä–∫–µ** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±–∏—Ä–∞–ª–æ—Å—å –±–µ–∑ production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. **–†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ .env** - —Ä–∏—Å–∫ –æ—à–∏–±–æ–∫ –∏ —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö
4. **–•–∞—Ä–¥–∫–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** - –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –Ω–µ–≥–∏–±–∫–æ

### ‚úÖ –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥:
1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ .env –∏–∑ Secrets** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏ —Å–±–æ—Ä–∫–µ** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è production
3. **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ env.example** - –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è
4. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ GitHub Secrets

## üîë –¢—Ä–µ–±—É–µ–º—ã–µ GitHub Secrets

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
| Secret | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|--------|----------|--------|
| `VPS_HOST` | IP –∏–ª–∏ –¥–æ–º–µ–Ω VPS | `192.168.1.100` |
| `VPS_USER` | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `root` |
| `DEPLOY_KEY` | SSH –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á | `-----BEGIN OPENSSH PRIVATE KEY-----` |

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
| Secret | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|--------|----------|--------|
| `NODE_ENV` | –û–∫—Ä—É–∂–µ–Ω–∏–µ | `production` |
| `PORT` | –ü–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | `5000` |
| `SUPABASE_URL` | URL Supabase | `https://project.supabase.co` |
| `SUPABASE_ANON_KEY` | –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á Supabase | `eyJ...` |
| `SUPABASE_SERVICE_ROLE_KEY` | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á Supabase | `eyJ...` |
| `DATABASE_URL` | URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | `postgresql://...` |
| `JWT_SECRET` | –°–µ–∫—Ä–µ—Ç –¥–ª—è JWT | `very-long-secret-32-chars` |

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞:
| Secret | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|--------|----------|--------|
| `VITE_SUPABASE_URL` | URL –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ | `https://project.supabase.co` |
| `VITE_SUPABASE_ANON_KEY` | –ö–ª—é—á –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ | `eyJ...` |

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ü–µ—Ä–µ–¥–∞—á–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ—Ä–∫–µ

**–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥:**
```yaml
- name: Build application
  run: npm run build:production
  env:
    NODE_ENV: production  # –•–∞—Ä–¥–∫–æ–¥
```

**–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥:**
```yaml
- name: Build application
  run: npm run build:production
  env:
    NODE_ENV: ${{ secrets.NODE_ENV }}
    PORT: ${{ secrets.PORT }}
    SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
    SUPABASE_ANON_KEY: ${{ secrets.SUPABASE_ANON_KEY }}
    SUPABASE_SERVICE_ROLE_KEY: ${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}
    DATABASE_URL: ${{ secrets.DATABASE_URL }}
    JWT_SECRET: ${{ secrets.JWT_SECRET }}
    VITE_SUPABASE_URL: ${{ secrets.VITE_SUPABASE_URL }}
    VITE_SUPABASE_ANON_KEY: ${{ secrets.VITE_SUPABASE_ANON_KEY }}
```

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ .env

**–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥:**
```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞ (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ)
cp env.example .env
```

**–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥:**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑ Secrets (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
cat > .env <<EOL
NODE_ENV=${{ secrets.NODE_ENV }}
PORT=${{ secrets.PORT }}
SUPABASE_URL=${{ secrets.SUPABASE_URL }}
SUPABASE_ANON_KEY=${{ secrets.SUPABASE_ANON_KEY }}
SUPABASE_SERVICE_ROLE_KEY=${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}
DATABASE_URL=${{ secrets.DATABASE_URL }}
JWT_SECRET=${{ secrets.JWT_SECRET }}
VITE_SUPABASE_URL=${{ secrets.VITE_SUPABASE_URL }}
VITE_SUPABASE_ANON_KEY=${{ secrets.VITE_SUPABASE_ANON_KEY }}
EOL
```

### 3. –ò—Å–∫–ª—é—á–µ–Ω–∏–µ env.example

**–°—Ç–∞—Ä—ã–π –∞—Ä—Ö–∏–≤:**
```bash
tar -czf deployment.tar.gz \
  dist/ \
  package.json \
  env.example  # ‚ùå –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  ...
```

**–ù–æ–≤—ã–π –∞—Ä—Ö–∏–≤:**
```bash
tar -czf deployment.tar.gz \
  dist/ \
  package.json \
  # env.example –∏—Å–∫–ª—é—á–µ–Ω ‚úÖ
  ...
```

## üõ°Ô∏è –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### ‚úÖ –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- env.example –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω
- –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ GitHub Secrets

### ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –õ–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ GitHub

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:
- –ù–µ—Ç —Ä—É—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è
- –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ GitHub Actions

### ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π:
- –†–∞–∑–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- –õ–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É staging/production
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üö® –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤:
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ JWT —Å–µ–∫—Ä–µ—Ç–∞
openssl rand -base64 32

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ GitHub Secrets
# Settings > Secrets and variables > Actions
```

### 2. –†–æ—Ç–∞—Ü–∏—è SSH –∫–ª—é—á–µ–π:
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞
ssh-keygen -t rsa -b 4096 -C "deploy@roleplayidentity" -f ~/.ssh/deploy_key_new

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ VPS
ssh-copy-id -i ~/.ssh/deploy_key_new.pub username@your-vps-ip

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ GitHub Secrets
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –ª–æ–≥–æ–≤ –Ω–∞ VPS
sudo tail -f /var/log/auth.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ GitHub Actions –ª–æ–≥–æ–≤
# Actions > Deploy to VPS > –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π run
```

### 4. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞:
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ fail2ban
sudo apt install fail2ban -y
sudo systemctl enable fail2ban
sudo systemctl start fail2ban

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ SSH –ø–æ IP (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
sudo ufw allow from YOUR_IP to any port 22
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ | –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ |
|--------|---------------|--------------|
| –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ | –í —Ñ–∞–π–ª–∞—Ö | GitHub Secrets |
| –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö | –ß–µ—Ä–µ–∑ —Ñ–∞–π–ª—ã | –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ |
| –†–∏—Å–∫ —É—Ç–µ—á–∫–∏ | –í—ã—Å–æ–∫–∏–π | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –†—É—á–Ω–æ–µ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ |
| –ê—É–¥–∏—Ç | –ù–µ—Ç | –ü–æ–ª–Ω—ã–π |
| –ò–∑–æ–ª—è—Ü–∏—è | –°–ª–∞–±–∞—è | –°–∏–ª—å–Ω–∞—è |

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- ‚úÖ **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞**
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**
- ‚úÖ **–ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π**
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–π workflow –¥–ª—è –≤—Å–µ—Ö production –¥–µ–ø–ª–æ–µ–≤. 